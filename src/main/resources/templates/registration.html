<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Registro de Usuario</title>
    <script type="text/javascript">
        // Función para mostrar el formulario de cliente por defecto al cargar la página
        document.addEventListener('DOMContentLoaded', function() {
            var clientForm = document.getElementById('clientForm');
            var providerForm = document.getElementById('providerForm');

            clientForm.style.display = 'block';
            providerForm.style.display = 'none';
        });

        function showForm(type) {
            var clientForm = document.getElementById('clientForm');
            var providerForm = document.getElementById('providerForm');

            if (type === 'client') {
                clientForm.style.display = 'block';
                providerForm.style.display = 'none';
            } else if (type === 'provider') {
                clientForm.style.display = 'none';
                providerForm.style.display = 'block';
            }
        }
    </script>
</head>
<body>

<h1>Registro de Usuario</h1>

<select onchange="showForm(this.value)">
    <option value="client" selected>Cliente</option>
    <option value="provider">Proveedor</option>
</select>

<form id="clientForm" action="/registration/client" method="post" th:object="${clientUser}">
    <!-- Campos específicos para ClientUser -->
    <input type="text" th:field="*{name}" placeholder="Nombre"/>
    <input type="text" th:field="*{email}" placeholder="Email"/>
    <input type="password" th:field="*{password}" placeholder="Contraseña"/>
    <input type="submit" value="Registrar como Cliente"/>
</form>

<form id="providerForm" action="/registration/provider" enctype="multipart/form-data"
      onsubmit="return validarFormulario()" method="post" style="display: none;" th:object="${providerUser}">
    <!-- Campos específicos para ProviderUser -->
    <input type="text" th:field="*{name}" placeholder="Nombre"/>
    <input type="text" th:field="*{email}" placeholder="Email"/>
    <input type="password" th:field="*{password}" placeholder="Contraseña"/>
    <input type="number" name="whatsApp" class="form-control bg-dark text-white fw-semibold"
           placeholder="WhatsApp">
    <label for="image" class="mb-2 fw-semibold fs-5">Foto de Perfil</label>
    <input type="file" accept="image/*" id="image" name="archivo" class="form-control bg-dark text-white"
           onchange="previewImage(event)">
    <img id="preview" src="" alt="Image Preview" style="max-width: 200px; max-height: 200px; display: none;">

    <input type="submit" value="Registrar como Proveedor"/>
</form>
<!-- FRAGMENT MENSAJES DE ERROR O ÉXITO THYMELEAF RECIBIDOS DE CONTROLADOR -->
<div th:fragment="${/fragments/thmsg} :: div"></div>
<script th:replace="@{/fragments/script} :: script"></script>
</body>

</html>
