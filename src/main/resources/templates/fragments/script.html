<!-- SCRIPT PARA REGISTRO DE USUARIO PROVEEDOR -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var roleSelect = document.getElementById('role');
        var imagenDiv = document.getElementById('imagenDiv');
        var skillsDiv = document.getElementById('skillsDiv');
        var wapDiv = document.getElementById('wapDiv');

        if (roleSelect) {
          // Verificar el valor predeterminado al cargar la página
          toggleFieldVisibility(roleSelect.value);

          // Agregar un listener para cambios en la selección
          roleSelect.addEventListener('change', function () {
            toggleFieldVisibility(roleSelect.value);
          });
        }
    });

    function toggleFieldVisibility(value) {
        var imagenDiv = document.getElementById('imagenDiv');
        var skillsDiv = document.getElementById('skillsDiv');
        var wapDiv = document.getElementById('wapDiv');

        if (value === 'providerUser') {
            imagenDiv.style.display = 'block';
            skillsDiv.style.display = 'block';
            wapDiv.style.display = 'block';
        } else {
            imagenDiv.style.display = 'none';
            skillsDiv.style.display = 'none';
            wapDiv.style.display = 'none';
        }
    }

    function previewImage(event) {
        var input = event.target;
        var preview = document.getElementById('preview');

        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                preview.src = e.target.result;
                preview.style.display = 'block';
            };

            reader.readAsDataURL(input.files[0]);
        }
    }

    function validarFormulario() {
        var tipoUsuario = document.getElementById('role').value;

        if (tipoUsuario === 'providerUser') {
            var checkboxes = document.getElementsByName('skills');
            var contadorSeleccionados = 0;

            for (var i = 0; i < checkboxes.length; i++) {
                if (checkboxes[i].checked) {
                    contadorSeleccionados++;
                }
            }

            if (contadorSeleccionados === 0) {
                mostrarMensajeError('Por favor, selecciona al menos una habilidad.');
                return false;
            }
        }

        return true;
    }

    function mostrarMensajeError(mensaje) {
        var mensajeErrorElemento = document.getElementById('mensajeError');
        mensajeErrorElemento.innerText = mensaje;
    }
</script>
